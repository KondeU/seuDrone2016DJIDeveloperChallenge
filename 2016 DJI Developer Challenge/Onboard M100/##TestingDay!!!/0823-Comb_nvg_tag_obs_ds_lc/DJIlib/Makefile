LIBSRCS = DJI_API.cpp \
          DJI_App.cpp \
          DJI_Camera.cpp \
          DJI_Codec.cpp \
          DJI_Flight.cpp \
          DJI_Follow.cpp \
          DJI_HardDriver.cpp \
          DJI_HotPoint.cpp \
          DJI_Link.cpp \
          DJI_Memory.cpp \
          DJI_Mission.cpp \
          DJI_VirtualRC.cpp \
          DJI_WayPoint.cpp

SCRIPTSRCS = cmdCamera.cpp \
             cmdCoreAPI.cpp \
             cmdFlight.cpp \
             cmdFollow.cpp \
             cmdHotPoint.cpp \
             cmdIO.cpp \
             cmdSettings.cpp \
             cmdVirtualRC.cpp \
             cmdWayPoint.cpp \
             DJI_Interpreter.cpp \
             DJI_Script.cpp

CONBOARD = conboardsdktask.cpp \
           APIThread.cpp \
           DJIHardDriverManifold.cpp \

SRCS = $(CONBOARD) \
       $(LIBSRCS) \
       $(SCRIPTSRCS)

OBJS = $(SRCS:.cpp=.o)

LIBDIR = .
DJISCRIPTDIR = $(LIBDIR)/DJIscript

CC = g++
INC = -I$(LIBDIR)/inc -I$(DJISCRIPTDIR)/inc
CFLAGS = --std=c++11 $(INC) -pthread

LIBAPRILTAG = libonboard.a

$(LIBAPRILTAG) : $(OBJS)
	@echo "   [$@]"
	@ar -cq $@ $(OBJS)
	mv ./$(LIBAPRILTAG) ../$(LIBAPRILTAG)

%.o : ./conboardSDK/%.cpp ./conboardSDK/%.h
	$(CC) $(CFLAGS) -o $@ -c $<

%.o : $(LIBDIR)/src/%.cpp $(LIBDIR)/inc/%.h
	$(CC) $(CFLAGS) -o $@ -c $<

%.o : $(DJISCRIPTDIR)/src/%.cpp $(DJISCRIPTDIR)/inc/%.h
	$(CC) $(CFLAGS) $(INC) -o $@ -c $<

clean :
	rm -f *.o $(LIBAPRILTAG)
